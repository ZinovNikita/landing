import{l as U,d as F,r as _,o as m,c as x,a,e as l,F as g,g as s,h as k,m as L,f as b,U as T,n as P,q as R}from"./index-458c871c.js";const S={locale:"ru_RU",today:"Сегодня",now:"Сейчас",backToToday:"Текущая дата",ok:"ОК",clear:"Очистить",month:"Месяц",year:"Год",timeSelect:"Выбрать время",dateSelect:"Выбрать дату",monthSelect:"Выбрать месяц",yearSelect:"Выбрать год",decadeSelect:"Выбрать десятилетие",yearFormat:"YYYY",dateFormat:"D-M-YYYY",dayFormat:"D",dateTimeFormat:"D-M-YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Предыдущий месяц (PageUp)",nextMonth:"Следующий месяц (PageDown)",previousYear:"Предыдущий год (Control + left)",nextYear:"Следующий год (Control + right)",previousDecade:"Предыдущее десятилетие",nextDecade:"Следущее десятилетие",previousCentury:"Предыдущий век",nextCentury:"Следующий век"},B=S,N={placeholder:"Выберите время",rangePlaceholder:["Время начала","Время окончания"]},$=N,E={lang:U({placeholder:"Выберите дату",yearPlaceholder:"Выберите год",quarterPlaceholder:"Выберите квартал",monthPlaceholder:"Выберите месяц",weekPlaceholder:"Выберите неделю",rangePlaceholder:["Начальная дата","Конечная дата"],rangeYearPlaceholder:["Начальный год","Год окончания"],rangeMonthPlaceholder:["Начальный месяц","Конечный месяц"],rangeWeekPlaceholder:["Начальная неделя","Конечная неделя"]},B),timePickerLocale:U({},$)},A=E,H=F({__name:"XMLTemplates",setup(V){const c=_([]),f=_(""),i=_(0),h=_([]);let v="";const D=o=>{var t;return o.type!=="text/xml"?T.LIST_IGNORE:((t=h.value)==null||t.push(o),new Promise(p=>{const u=new FileReader;u.readAsText(o),u.onload=()=>{v=u.result||"";const d=v.match(/(\$\{)([^\}]*)(\})/gi);d!==null&&d.length>0&&d.forEach(n=>{const r=n.substring(2,n.length-1).split(":");r.length===3&&!c.value.find(Y=>Y.name===r[0])&&c.value.push({template:n,name:r[0],type:r[1],label:r[2],value:""})}),i.value=1,p(!0)}}),!1)},C=()=>{v="",i.value=0,c.value=[],h.value=[]},w=()=>{let o=v;for(let p of c.value)o=o.replace(p.template,p.value);const t=document.createElement("a");t.setAttribute("download",`${f.value}.xml`),t.setAttribute("href",URL.createObjectURL(new Blob([o],{type:"text/xml"}))),t.click(),i.value=2};return(o,t)=>{const p=s("a-steps"),u=s("a-button"),d=s("a-upload"),n=s("a-form-item"),r=s("a-input"),Y=s("a-date-picker"),M=s("a-form");return m(),x(g,null,[a(p,{current:i.value,size:"small",items:[{title:"Выбрать шаблон"},{title:"Заполнить поля"},{title:"Сохранить файл"}]},null,8,["current"]),a(M,{onFinish:w,"label-col":{span:5},"wrapper-col":{span:13}},{default:l(()=>[a(n,{"wrapper-col":{span:13,offset:5}},{default:l(()=>[a(d,{accept:"text/xml,application/xml","file-list":h.value,multiple:!0,"max-count":1,"before-upload":D,onRemove:C},{default:l(()=>[a(u,null,{default:l(()=>[k("Выбрать шаблон")]),_:1})]),_:1},8,["file-list"])]),_:1}),c.value&&c.value.length>0?(m(),x(g,{key:0},[a(n,{label:"Имя файла"},{default:l(()=>[a(r,{value:f.value,"onUpdate:value":t[0]||(t[0]=e=>f.value=e)},null,8,["value"])]),_:1}),(m(!0),x(g,null,L(c.value,e=>(m(),P(n,{label:e.label,name:e.name},{default:l(()=>[e.type==="input"?(m(),P(r,{key:0,value:e.value,"onUpdate:value":y=>e.value=y},null,8,["value","onUpdate:value"])):b("",!0),e.type==="date"?(m(),P(Y,{key:1,value:e.value,"onUpdate:value":y=>e.value=y,valueFormat:"DD.MM.YYYY",format:"DD.MM.YYYY",locale:R(A),style:{width:"100%"}},null,8,["value","onUpdate:value","locale"])):b("",!0)]),_:2},1032,["label","name"]))),256)),a(n,{"wrapper-col":{span:13,offset:5}},{default:l(()=>[a(u,{type:"primary",onClick:w},{default:l(()=>[k("Распечатать")]),_:1}),a(u,{style:{"margin-left":"10px"},onClick:C},{default:l(()=>[k("Очистить")]),_:1})]),_:1})],64)):b("",!0)]),_:1})],64)}}});export{H as default};
